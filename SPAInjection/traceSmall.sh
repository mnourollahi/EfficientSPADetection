#!/bin/bash
lttng-sessiond --daemonize
output_base_dir="/media/masoum/vm11/track3/newProbInjec/baseline"
# Outer loop
for i in {1..1}
do
    # Create outer folder
    outer_folder="$output_base_dir/folder_$i"
    mkdir -p "$outer_folder"
    
    # Inner loop
    for j in {1..3}
    do
        # Create inner folder inside the outer folder
        inner_folder="$outer_folder/subfolder_$j"
        mkdir -p "$inner_folder"
        
    	output_dir="$inner_folder"
    	
    	sleep 10
	lttng create  test-session --output="$output_dir"
	lttng enable-channel --kernel --tracefile-count=2048 --tracefile-size=2M --num-subbuf=4 --subbuf-size=10M kernel-channel
	lttng enable-channel --userspace --tracefile-count=2048 --tracefile-size=2M --num-subbuf=4 --subbuf-size=10M ust-channel
	lttng enable-event  --userspace 'jaeger*' --channel=ust-channel --session test-session
	lttng enable-event  -k --channel=kernel-channel --syscall recvfrom,recvmsg,recvmmsg,sendto,sendmsg,sendmmsg --filter='$ctx.pid_ns  ==   4026531835  || $ctx.pid_ns ==    4026531836  || $ctx.pid_ns ==    4026531837  || $ctx.pid_ns ==    4026531838  || $ctx.pid_ns ==    4026531839  || $ctx.pid_ns ==    4026531840  || $ctx.pid_ns ==    4026531860  || $ctx.pid_ns ==    4026531992  || $ctx.pid_ns ==    4026532183  || $ctx.pid_ns ==    4026532184  || $ctx.pid_ns ==    4026532333  || $ctx.pid_ns ==    4026532334  || $ctx.pid_ns ==    4026532335  || $ctx.pid_ns ==    4026532336  || $ctx.pid_ns ==    4026532346  || $ctx.pid_ns ==    4026532412  || $ctx.pid_ns ==    4026532413  || $ctx.pid_ns ==    4026532414  || $ctx.pid_ns ==    4026532415  || $ctx.pid_ns ==    4026532417  || $ctx.pid_ns ==    4026532418  || $ctx.pid_ns ==    4026532419  || $ctx.pid_ns ==    4026532420  || $ctx.pid_ns ==    4026532421  || $ctx.pid_ns ==    4026532423  || $ctx.pid_ns ==    4026532425  || $ctx.pid_ns ==    4026532488  || $ctx.pid_ns ==    4026532553  || $ctx.pid_ns ==    4026532554  || $ctx.pid_ns ==    4026532563  || $ctx.pid_ns ==    4026532564  || $ctx.pid_ns ==    4026532566  || $ctx.pid_ns ==    4026532571  || $ctx.pid_ns ==    4026532573  || $ctx.pid_ns ==    4026532799  || $ctx.pid_ns ==    4026532801  || $ctx.pid_ns ==    4026532802  || $ctx.pid_ns ==    4026532803  || $ctx.pid_ns ==    4026532804  || $ctx.pid_ns ==    4026532806  || $ctx.pid_ns ==    4026532886  || $ctx.pid_ns ==    4026532887  || $ctx.pid_ns ==    4026532888  || $ctx.pid_ns ==    4026532889  || $ctx.pid_ns ==    4026532891  || $ctx.pid_ns ==    4026532960  || $ctx.pid_ns ==    4026532964  || $ctx.pid_ns ==    4026532965  || $ctx.pid_ns ==    4026532966  || $ctx.pid_ns ==    4026532967  || $ctx.pid_ns ==    4026532969  || $ctx.pid_ns ==    4026533042  || $ctx.pid_ns ==    4026533043  || $ctx.pid_ns ==    4026533044  || $ctx.pid_ns ==    4026533046  || $ctx.pid_ns ==    4026533118  || $ctx.pid_ns ==    4026533119  || $ctx.pid_ns ==    4026533120  || $ctx.pid_ns ==    4026533121  || $ctx.pid_ns ==    4026533123  || $ctx.pid_ns ==    4026533215  || $ctx.pid_ns ==    4026533216  || $ctx.pid_ns ==    4026533217  || $ctx.pid_ns ==    4026533218  || $ctx.pid_ns ==    4026533220  || $ctx.pid_ns ==    4026533289  || $ctx.pid_ns ==    4026533290  || $ctx.pid_ns ==    4026533291  || $ctx.pid_ns ==    4026533292  || $ctx.pid_ns ==    4026533294  || $ctx.pid_ns ==    4026533363  || $ctx.pid_ns ==    4026533364  || $ctx.pid_ns ==    4026533365  || $ctx.pid_ns ==    4026533366  || $ctx.pid_ns ==    4026533368  || $ctx.pid_ns ==    4026533437  || $ctx.pid_ns ==    4026533438  || $ctx.pid_ns ==    4026533439  || $ctx.pid_ns ==    4026533441  || $ctx.pid_ns ==    4026533511  || $ctx.pid_ns ==    4026533512  || $ctx.pid_ns ==    4026533516  || $ctx.pid_ns ==    4026533518  || $ctx.pid_ns ==    4026533522  || $ctx.pid_ns ==    4026533523  || $ctx.pid_ns ==    4026533524  || $ctx.pid_ns ==    4026533525  || $ctx.pid_ns ==    4026533526  || $ctx.pid_ns ==    4026533528  || $ctx.pid_ns ==    4026533598  || $ctx.pid_ns ==    4026533601  || $ctx.pid_ns ==    4026533607  || $ctx.pid_ns ==    4026533608  || $ctx.pid_ns ==    4026533609  || $ctx.pid_ns ==    4026533610  || $ctx.pid_ns ==    4026533612  || $ctx.pid_ns ==    4026533681  || $ctx.pid_ns ==    4026533687  || $ctx.pid_ns ==    4026533688  || $ctx.pid_ns ==    4026533690  || $ctx.pid_ns ==    4026533691  || $ctx.pid_ns ==    4026533692  || $ctx.pid_ns ==    4026533693  || $ctx.pid_ns ==    4026533695  || $ctx.pid_ns ==    4026533738  || $ctx.pid_ns ==    4026533739  || $ctx.pid_ns ==    4026533741  || $ctx.pid_ns ==    4026533759  || $ctx.pid_ns ==    4026533760  || $ctx.pid_ns ==    4026533762  || $ctx.pid_ns ==    4026533765  || $ctx.pid_ns ==    4026533767  || $ctx.pid_ns ==    4026533768  || $ctx.pid_ns ==    4026533769  || $ctx.pid_ns ==    4026533770  || $ctx.pid_ns ==    4026533772  || $ctx.pid_ns ==    4026533840  || $ctx.pid_ns ==    4026533841  || $ctx.pid_ns ==    4026533843  || $ctx.pid_ns ==    4026533844  || $ctx.pid_ns ==    4026533845  || $ctx.pid_ns ==    4026533846  || $ctx.pid_ns ==    4026533848  || $ctx.pid_ns ==    4026533906  || $ctx.pid_ns ==    4026533908  || $ctx.pid_ns ==    4026533909  || $ctx.pid_ns ==    4026533910  || $ctx.pid_ns ==    4026533911  || $ctx.pid_ns ==    4026533913  || $ctx.pid_ns ==    4026533914  || $ctx.pid_ns ==    4026533915  || $ctx.pid_ns ==    4026533916  || $ctx.pid_ns ==    4026533918  || $ctx.pid_ns ==    4026533987  || $ctx.pid_ns ==    4026533988  || $ctx.pid_ns ==    4026533989  || $ctx.pid_ns ==    4026533990  || $ctx.pid_ns ==    4026533992  || $ctx.pid_ns ==    4026534084  || $ctx.pid_ns ==    4026534209  || $ctx.pid_ns ==    4026534210  || $ctx.pid_ns ==    4026534211  || $ctx.pid_ns ==    4026534212  || $ctx.pid_ns ==    4026534214  || $ctx.pid_ns ==    4026534282  || $ctx.pid_ns ==    4026534283  || $ctx.pid_ns ==    4026534284  || $ctx.pid_ns ==    4026534286  || $ctx.pid_ns ==    4026534354  || $ctx.pid_ns ==    4026534355  || $ctx.pid_ns ==    4026534356  || $ctx.pid_ns ==    4026534358  || $ctx.pid_ns ==    4026534420  || $ctx.pid_ns ==    4026534427  || $ctx.pid_ns ==    4026534429  || $ctx.pid_ns ==    4026534430  || $ctx.pid_ns ==    4026534432  || $ctx.pid_ns ==    4026534582  || $ctx.pid_ns ==    4026534583  || $ctx.pid_ns ==    4026534584  || $ctx.pid_ns ==    4026534585  || $ctx.pid_ns ==    4026534587  || $ctx.pid_ns ==    4026534673  || $ctx.pid_ns ==    4026534674  || $ctx.pid_ns ==    4026534675  || $ctx.pid_ns ==    4026534676  || $ctx.pid_ns ==    4026534678  || $ctx.pid_ns ==    4026534749  || $ctx.pid_ns ==    4026534750  || $ctx.pid_ns ==    4026534751  || $ctx.pid_ns ==    4026534752  || $ctx.pid_ns ==    4026534754  || $ctx.pid_ns ==    4026534823  || $ctx.pid_ns ==    4026534824  || $ctx.pid_ns ==    4026534825  || $ctx.pid_ns ==    4026534826  || $ctx.pid_ns ==    4026534828  || $ctx.pid_ns ==    4026534899  || $ctx.pid_ns ==    4026534900  || $ctx.pid_ns ==    4026534901  || $ctx.pid_ns ==    4026534903  || $ctx.pid_ns ==    4026534973  || $ctx.pid_ns ==    4026534974  || $ctx.pid_ns ==    4026534975  || $ctx.pid_ns ==    4026534977  || $ctx.pid_ns ==    4026535047  || $ctx.pid_ns ==    4026535049  || $ctx.pid_ns ==    4026535050  || $ctx.pid_ns ==    4026535051  || $ctx.pid_ns ==    4026535052  || $ctx.pid_ns ==    4026535054  || $ctx.pid_ns ==    4026535127  || $ctx.pid_ns ==    4026535128  || $ctx.pid_ns ==    4026535129  || $ctx.pid_ns ==    4026535130  || $ctx.pid_ns ==    4026535132  || $ctx.pid_ns ==    4026535201  || $ctx.pid_ns ==    4026535202  || $ctx.pid_ns ==    4026535203  || $ctx.pid_ns ==    4026535204  || $ctx.pid_ns ==    4026535206  || $ctx.pid_ns ==    4026535281  || $ctx.pid_ns ==    4026535282  || $ctx.pid_ns ==    4026535283  || $ctx.pid_ns ==    4026535285  || $ctx.pid_ns ==    4026535357  || $ctx.pid_ns ==    4026535358  || $ctx.pid_ns ==    4026535359  || $ctx.pid_ns ==    4026535360  || $ctx.pid_ns ==    4026535362  || $ctx.pid_ns ==    4026535431  || $ctx.pid_ns ==    4026535432  || $ctx.pid_ns ==    4026535433  || $ctx.pid_ns ==    4026535434  || $ctx.pid_ns ==    4026535435  || $ctx.pid_ns ==    4026535437  || $ctx.pid_ns ==    4026535441  || $ctx.pid_ns ==    4026535442  || $ctx.pid_ns ==    4026535443  || $ctx.pid_ns ==    4026535445  || $ctx.pid_ns ==    4026535578  || $ctx.pid_ns ==    4026535580  || $ctx.pid_ns ==    4026535581  || $ctx.pid_ns ==    4026535582  || $ctx.pid_ns ==    4026535583  || $ctx.pid_ns ==    4026535585  || $ctx.pid_ns ==    4026535658  || $ctx.pid_ns ==    4026535659  || $ctx.pid_ns ==    4026535660  || $ctx.pid_ns ==    4026535661  || $ctx.pid_ns ==    4026535663  || $ctx.pid_ns ==    4026535732  || $ctx.pid_ns ==    4026535733  || $ctx.pid_ns ==    4026535734  || $ctx.pid_ns ==    4026535735  || $ctx.pid_ns ==    4026535737  || $ctx.pid_ns ==    4026535810  || $ctx.pid_ns ==    4026535813' --session test-session
	lttng add-context -k -t tid -t vtid -t  pid -t vpid
	lttng add-context -u -t tid -t vtid -t  pid -t vpid
	lttng start  test-session 
	sleep 6
	lttng stop test-session 
	lttng destroy test-session 
	sleep 10
    done
done

